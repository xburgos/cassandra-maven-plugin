<?xml version='1.0' encoding='UTF-8'?>
<component-set>
  <components>
    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>rpm-light</role-hint>
      <implementation>
        org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping
      </implementation>
      <configuration>
        <lifecycles>
          <lifecycle>
            <id>clean</id>
            <phases>
              <clean>
                org.apache.maven.plugins:maven-clean-plugin:clean
              </clean>
              <post-clean>
                org.codehaus.mojo:rpm-cbuild-maven-plugin:remove
              </post-clean>
            </phases>
          </lifecycle>
          <lifecycle>
            <id>default</id>
            <phases>
              <validate>org.codehaus.mojo:rpm-cbuild-maven-plugin:platform-detect</validate>
              <initialize>
                org.codehaus.mojo:build-on-demand-maven-plugin:resolve,
                org.codehaus.mojo:patch-maven-plugin:resolve-patches
              </initialize>
              <process-sources>
                org.codehaus.mojo:patch-maven-plugin:apply-directory
              </process-sources>
              <package>
                org.codehaus.mojo:rpm-cbuild-maven-plugin:generate-spec,
                org.codehaus.mojo:rpm-cbuild-maven-plugin:build,
                org.codehaus.mojo:patch-maven-plugin:package-patches,
				org.apache.maven.plugins:maven-jar-plugin:jar
              </package>
              <install>
                org.apache.maven.plugins:maven-install-plugin:install,
                org.codehaus.mojo:rpm-cbuild-maven-plugin:install,
                org.codehaus.mojo:patch-maven-plugin:purge-local-patch-artifact
              </install>
              <deploy>
                org.apache.maven.plugins:maven-deploy-plugin:deploy
              </deploy>
            </phases>
          </lifecycle>
        </lifecycles>
      </configuration>
    </component>

    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>automvn</role-hint>
      <implementation>
        org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping
      </implementation>
      <configuration>
        <lifecycles>
          <lifecycle>
            <id>clean</id>
            <phases>
              <clean>org.apache.maven.plugins:maven-clean-plugin:clean</clean>
            </phases>
          </lifecycle>
          <lifecycle>
            <id>default</id>
            <phases>
              <validate>org.codehaus.mojo:make-maven-plugin:validate-pom</validate>
              <initialize>
                org.codehaus.mojo:build-on-demand-maven-plugin:resolve,
                org.codehaus.mojo:make-maven-plugin:autoreconf
              </initialize>
              <generate-resources>org.codehaus.mojo:make-maven-plugin:configure</generate-resources>
              <compile>org.codehaus.mojo:make-maven-plugin:compile</compile>
              <test>org.codehaus.mojo:make-maven-plugin:test</test>
              <prepare-package>org.codehaus.mojo:make-maven-plugin:make-install</prepare-package>
              <package>
                org.codehaus.mojo:make-maven-plugin:make-dist,
				org.apache.maven.plugins:maven-jar-plugin:jar
              </package>
              <install>org.apache.maven.plugins:maven-install-plugin:install</install>
              <deploy>org.apache.maven.plugins:maven-deploy-plugin:deploy</deploy>
            </phases>
          </lifecycle>
        </lifecycles>
      </configuration>
    </component>
    
    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>rpm</role-hint>
      <implementation>
        org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping
      </implementation>
      <configuration>
        <lifecycles>
          <lifecycle>
            <id>clean</id>
            <phases>
              <clean>org.apache.maven.plugins:maven-clean-plugin:clean</clean>
              <post-clean>org.codehaus.mojo:rpm-cbuild-maven-plugin:remove</post-clean>
            </phases>
          </lifecycle>
          <lifecycle>
            <id>default</id>
            <phases>
              <validate>
                org.codehaus.mojo:make-maven-plugin:validate-pom,
                org.codehaus.mojo:rpm-cbuild-maven-plugin:platform-detect
              </validate>
              <initialize>
                org.codehaus.mojo:build-on-demand-maven-plugin:resolve,
                org.codehaus.mojo:patch-maven-plugin:resolve-patches,
                org.apache.maven.plugins:maven-dependency-plugin:copy,
                org.codehaus.mojo:make-maven-plugin:unpack
              </initialize>

              <process-sources>org.codehaus.mojo:patch-maven-plugin:apply-directory</process-sources>
              <generate-resources>org.codehaus.mojo:make-maven-plugin:configure</generate-resources>
              <compile>org.codehaus.mojo:make-maven-plugin:compile</compile>
              <test>org.codehaus.mojo:make-maven-plugin:test</test>

              <prepare-package>org.codehaus.mojo:make-maven-plugin:make-install</prepare-package>

              <package>
                org.codehaus.mojo:rpm-cbuild-maven-plugin:generate-spec,
                org.codehaus.mojo:rpm-cbuild-maven-plugin:build,
                org.codehaus.mojo:patch-maven-plugin:package-patches,
				org.apache.maven.plugins:maven-jar-plugin:jar
              </package>
              <install>
                org.apache.maven.plugins:maven-install-plugin:install,
                org.codehaus.mojo:rpm-cbuild-maven-plugin:install,
                org.codehaus.mojo:patch-maven-plugin:purge-local-patch-artifact
              </install>
              <deploy>
                org.apache.maven.plugins:maven-deploy-plugin:deploy
              </deploy>
            </phases>
          </lifecycle>
        </lifecycles>
      </configuration>
    </component>

    <!-- Bind mojos to the correct lifecycle phases for the 'jrpm' packaging.
      |    
      |   This lifecycle mapping uses four plugins:
      | 
      |   1. This plugin (maven-make-plugin) - Execute the meat of the build.
      |   2. maven-source-get-plugin - Retrieve project sources from some external URL.
      |   3. maven-patch-plugin - Retrieve and apply patches to project sources.
      |   4. maven-rpm-plugin - Bundle the result of 'make install' (or similar) as an RPM.
      |-->
    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>jrpm</role-hint>
      <implementation>
        org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping
      </implementation>
      <configuration>
        <lifecycles>
          <lifecycle>
            <id>clean</id>
            <phases>
              <clean>org.apache.maven.plugins:maven-clean-plugin:clean</clean>
              <post-clean>org.codehaus.mojo:rpm-cbuild-maven-plugin:remove</post-clean>
            </phases>
          </lifecycle>
          <lifecycle>
            <id>default</id>
            <phases>
              <validate>org.codehaus.mojo:rpm-cbuild-maven-plugin:platform-detect</validate>
              <initialize>
                org.codehaus.mojo:patch-maven-plugin:resolve-patches
              </initialize>

              <process-sources>
                org.codehaus.mojo:patch-maven-plugin:apply-directory
              </process-sources>

              <package>
                org.codehaus.mojo:rpm-cbuild-maven-plugin:generate-spec,
                org.codehaus.mojo:rpm-cbuild-maven-plugin:build,
                org.codehaus.mojo:patch-maven-plugin:package-patches,
                org.apache.maven.plugins:maven-jar-plugin:jar
              </package>

              <install>
                org.apache.maven.plugins:maven-install-plugin:install,
                org.codehaus.mojo:rpm-cbuild-maven-plugin:install,
                org.codehaus.mojo:patch-maven-plugin:purge-local-patch-artifact
              </install>

              <deploy>
                org.apache.maven.plugins:maven-deploy-plugin:deploy
              </deploy>
            </phases>
          </lifecycle>
        </lifecycles>
      </configuration>
    </component>

    <!-- The maven-install-plugin picks up these overloads when files are copied from target to the localRepository 
         This is plexus dependency injection at work
    -->
    <component>
      <role>org.apache.maven.artifact.handler.ArtifactHandler</role>
      <role-hint>rpm-light</role-hint>
      <implementation>
        org.apache.maven.artifact.handler.DefaultArtifactHandler
      </implementation>
      <configuration>
        <extension>jar</extension>
        <packaging>rpm-light</packaging>
        <type>rpm-artifact</type>
        <!--includesDependencies>true</includesDependencies-->
        <language>java</language>
        <addedToClasspath>false</addedToClasspath>
      </configuration>
    </component>

    <component>
      <role>org.apache.maven.artifact.handler.ArtifactHandler</role>
      <role-hint>automvn</role-hint>
      <implementation>
        org.apache.maven.artifact.handler.DefaultArtifactHandler
      </implementation>
      <configuration>
        <extension>jar</extension>
        <packaging>automvn</packaging>
        <type>source-tarball-artifact</type>
        <!--includesDependencies>true</includesDependencies-->
        <language>C</language>
        <addedToClasspath>false</addedToClasspath>
      </configuration>
    </component>
    
    <component>
      <role>org.apache.maven.artifact.handler.ArtifactHandler</role>
      <role-hint>rpm</role-hint>
      <implementation>
        org.apache.maven.artifact.handler.DefaultArtifactHandler
      </implementation>
      <configuration>
        <extension>jar</extension>
        <packaging>rpm</packaging>
        <type>rpm-artifact</type>
        <!--includesDependencies>true</includesDependencies-->
        <language>java</language>
        <addedToClasspath>false</addedToClasspath>
      </configuration>
    </component>

    <component>
      <role>org.apache.maven.artifact.handler.ArtifactHandler</role>
      <role-hint>jrpm</role-hint>
      <implementation>
        org.apache.maven.artifact.handler.DefaultArtifactHandler
      </implementation>
      <configuration>
        <extension>jar</extension>
        <packaging>jrpm</packaging>
        <type>rpm-artifact</type>
        <!--includesDependencies>true</includesDependencies-->
        <language>java</language>
        <addedToClasspath>false</addedToClasspath>
      </configuration>
    </component>
  </components>
</component-set>
